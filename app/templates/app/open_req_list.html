{% extends "app/base.html" %}
{% load humanize %}

{% block title %} Open Requests {% endblock %}

{% block endscripts %}
{% endblock %}




{% block links %}

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    {#    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>#}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    {#    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>#}
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    {#    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>#}
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" media="all"/>
    {#    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" type="text/javascript">#}
    {#    </script>#}
    {#    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>#}

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <!-- Bootstrap Core CSS -->
    {#    <link href="css/bootstrap.min.css" rel="stylesheet">#}

    {#    <link rel = "stylesheet" href="style.css">#}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <link href="{% static 'css/landing-page.css' %}" rel="stylesheet">
    <link href="{% static 'css/master.css' %}" rel="stylesheet">
{% endblock %}

{#{% block links %}#}
{##}
{#    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>#}
{#    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>#}
{#    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>#}
{##}
{#    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>#}
{#    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>#}
{##}
{#    <!-- Latest compiled and minified JavaScript -->#}
{#    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>#}
{#    <!-- Latest compiled and minified CSS -->#}
{#    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">#}
{##}
{##}
{#    <!-- Bootstrap Core CSS -->#}
{#    <link href="css/bootstrap.min.css" rel="stylesheet">#}
{##}
{#    <link rel = "stylesheet" href="style.css">#}
{#    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">#}
{##}
{#    <link href="{% static 'css/landing-page.css' %}" rel="stylesheet">#}
{#    <link href="{% static 'css/master.css' %}" rel="stylesheet">#}
{#{% endblock %}#}

{% block content %}
    <body class='open_req_container'>
    <div align='center'>
    <div class= "vertical-veil">
        <a href="new" class="btn btn-outline btn-lg mb-1"> <span class="network-name"><b>Make A New Request</b></span></a>
        <br>
        <div class="list-group open_req_list">
            <h1 align="center">{{Title}}</h1>
            <br>
            <div class="search_section">
                <input type="text" id="rides_search_text" name="search_text"/>
                <div id="rides_search_results"></div>
            </div>
            <div class= "d-flex flex-column justify-content-center">
                {% for ride in rides %}
                    <a href="select/{{ride.id}}" class="list-group-item list-group-item-action flex-column align-items-start">
                        <div class="d-flex w-100 justify-content-between">
                            <div class='lg-info'>
                                <h5 class="mb-1">Ride #{{ride.id}}<small class="text-muted pull-right">leaving {{ride.date_time|naturaltime}}</small></h5>

                                <small class="mb-2">Destination: {{ride.get_start_destination_display}} to {{ ride.end_destination}} </small>
                                <br>
                                <small class="mb-2">Ride Departure Time: {{ ride.date_time}}</small>
                                <br>
                                <small class="mb-2"># empty seats: {{ ride.seats }}</small>
                                <small class="text-muted"><br>Current Riders:
                                    {% for user in ride.usrs.all %}
                                        {{user.netid}}
                                    {% endfor %} </small>
                                {% for user in ride.usrs.all %}
                                    {%if netid == user.netid%}
                                        <small class="text-muted"><br>You are already in this ride!</small>
                                    {%endif%}
                                {% endfor %}

                            </div>
                        </div>
                    </a>

                {% endfor %}
            </div>

            <script language="javascript">
                /*
                 Before our JavaScript can be imported, the following JavaScript
                 variables need to be set from Django variables. While these
                 values could be hard-coded into the JavaScript, this allows
                 them to be centrally located.
                 */

                //The url to submit the search form. From color_liker.urls
                var SUBMIT_URL = "{% url 'rides_list' %}";

            </script>
            <script type='text/javascript' src="{% static 'js/rides_ajax_search.js' %}"></script>
            <script type='text/javascript' src="{% static 'js/rides_ajax_main.js' %}"></script>

        </div>
    </div>

{% endblock %}
<!-- </div> -->
{#{% block endscripts %}#}
{##}
{#{% endblock %}#}
